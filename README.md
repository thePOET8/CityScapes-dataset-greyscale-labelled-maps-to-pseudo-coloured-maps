# CityScapes-dataset-greyscale-labelled-maps-to-pseudo-coloured-maps
CityScapes数据集灰度标签图转为伪彩色图


目前搜集到的代码都或多或少存在个别问题，针对CityScapes数据集在训练网络时可能需要将灰度标签图转为伪彩色图这一需求，

其中的三个程序分别针对不同需求：

**灰度标签图转为伪彩色图(main.py）**         
---------------------------------------------------------                              
 目前可搜集到的方法，但存在局限性。                                         
                                               
--------------------------------------------------------------------------------------


**Mask叠加在原图**
--------------------------------------------------------------------------
![Mask叠加在原图](https://github.com/thePOET8/CityScapes-dataset-greyscale-labelled-maps-to-pseudo-coloured-maps/blob/main/README.assets/Mask_on_pic.jpg)



-------------------------------------------------------------------------------------------------------------------




**批量输出Mask图像，同时保存标注label的颜色值**
----------------------------------------------------------------------
优点：可以在多次运行时，输出的label颜色不变，且可修改，（第一次运行时自动生成随机且不重复的颜色值）
![批量输出Mask图像](https://github.com/thePOET8/CityScapes-dataset-greyscale-labelled-maps-to-pseudo-coloured-maps/blob/main/README.assets/Mask.jpg)

--------------------------------------------------------------------------------
**更新 2023/8/26** 
----------------------------------------------------------------------------------
由于CityScapes数据集的分辨率为2048x1024，之前的程序都使用了
 

    plt.savefig(output_path + ".jpg", bbox_inches='tight', pad_inches=0)
----------------------------------------------------------------------------------
紧凑型改变了生成出的图像的分辨率
---------------------------------------
新程序解决了这个问题，不再使用matplotlib，生成的图像分辨率为2048x1024与原数据集匹配

--------------------------------------------------------------------------------
**更新2023/8/27**
-----------------------------------------------------------------------------
在语义分割的训练样本准备过程中，需要生成8bit rgb彩色png图，这个时候如果直接用opencv的imread和imwrite读写操作，只能生成8bit png灰度图或24bit的真彩图。 
既然opencv不能保存成8bit的rgb png，这里就推荐用PIL库中的Image模块来读写png。据此重构的代码。
